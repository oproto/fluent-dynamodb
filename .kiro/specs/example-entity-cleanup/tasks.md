# Implementation Plan

- [x] 1. Refactor TodoList Example
  - [x] 1.1 Update TodoItem entity to use proper attributes
    - Ensure `[GenerateEntityProperty(Name = "TodoItems")]` is present
    - Ensure `[Scannable]` attribute is present
    - Ensure class is declared as `partial`
    - _Requirements: 1.1, 7.1, 7.3_
  - [x] 1.2 Refactor TodoTable to minimal partial class
    - Remove manually defined `Scan<TEntity>()` method
    - Remove manual repository methods that duplicate generated functionality
    - Keep only constructor and table name constant
    - _Requirements: 1.1, 2.1, 2.2_
  - [x] 1.3 Update Program.cs to use generated entity accessor methods
    - Replace `table.Scan<TodoItem>()` with `table.TodoItems.Scan()`
    - Replace `table.PutAsync(item)` with `table.TodoItems.PutAsync(item)`
    - Replace `table.Get<TodoItem>().WithKey(...).GetItemAsync()` with `table.TodoItems.GetAsync(id)`
    - Replace `table.Update<TodoItem>()` with `table.TodoItems.Update(id)`
    - Replace `table.Delete<TodoItem>()` with `table.TodoItems.Delete(id)`
    - Use lambda expressions for queries where applicable
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 4.1, 7.2_

- [x] 2. Checkpoint - Verify TodoList compiles and runs
  - Ensure all tests pass, ask the user if questions arise.

- [x] 3. Refactor TransactionDemo Example
  - [x] 3.1 Update Account entity to use proper attributes
    - Ensure `[GenerateEntityProperty(Name = "Accounts")]` is present
    - Ensure `[Scannable]` attribute is present
    - Ensure class is declared as `partial`
    - _Requirements: 1.2, 8.1_
  - [x] 3.2 Update TransactionRecord entity to use proper attributes
    - Ensure `[GenerateEntityProperty(Name = "Transactions")]` is present
    - Ensure class is declared as `partial`
    - _Requirements: 1.2_
  - [x] 3.3 Refactor TransactionDemoTable to minimal partial class
    - Remove manually defined `Scan<TEntity>()` method
    - Remove manual repository methods that duplicate generated functionality
    - Keep only constructor and table name constant
    - _Requirements: 1.2, 2.1, 2.2_
  - [x] 3.4 Update Program.cs and TransactionComparison.cs to use generated entity accessor methods
    - Replace generic methods with entity accessor methods
    - Use lambda expressions for queries
    - Use `table.Accounts.GetAsync(pk, sk)` instead of `table.Get<Account>().WithKey(...).GetItemAsync()`
    - Use `table.Accounts.Query(x => ...)` instead of `table.Query<Account>().Where(...)`
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 4.1, 8.2, 8.3_

- [x] 4. Checkpoint - Verify TransactionDemo compiles and runs
  - Ensure all tests pass, ask the user if questions arise.

- [x] 5. Refactor InvoiceManager Example
  - [x] 5.1 Update Customer entity to use proper attributes
    - Ensure `[GenerateEntityProperty(Name = "Customers")]` is present
    - Ensure class is declared as `partial`
    - _Requirements: 1.3_
  - [x] 5.2 Update Invoice entity to use proper attributes and RelatedEntity
    - Ensure `[GenerateEntityProperty(Name = "Invoices")]` is present
    - Ensure `[DynamoDbTable("invoices", IsDefault = true)]` marks Invoice as default entity
    - Ensure `[RelatedEntity]` attribute properly defines relationship with InvoiceLine
    - Ensure class is declared as `partial`
    - _Requirements: 1.3, 5.2_
  - [x] 5.3 Update InvoiceLine entity to use proper attributes
    - Ensure `[GenerateEntityProperty(Name = "InvoiceLines")]` is present
    - Ensure class is declared as `partial`
    - _Requirements: 1.3_
  - [x] 5.4 Refactor InvoiceTable to minimal partial class
    - Remove manually defined `Scan<TEntity>()` method
    - Remove manual `GetCompleteInvoiceAsync` method that manually assembles composite entities
    - Remove other manual repository methods that duplicate generated functionality
    - Keep only constructor and table name constant
    - _Requirements: 1.3, 2.1, 2.2, 2.3_
  - [x] 5.5 Update Program.cs to use generated entity accessor methods and ToCompoundEntityAsync
    - Replace manual composite entity assembly with `ToCompoundEntityAsync<Invoice>()`
    - Replace generic methods with entity accessor methods
    - Use lambda expressions for queries
    - Use `table.Invoices.PutAsync(invoice)` instead of `table.PutAsync(invoice)`
    - Use `table.Customers.GetAsync(pk, sk)` instead of `table.Get<Customer>().WithKey(...).GetItemAsync()`
    - _Requirements: 3.1, 3.2, 3.3, 3.4, 4.1, 4.2, 4.3, 5.1, 5.3_

- [x] 6. Checkpoint - Verify InvoiceManager compiles and runs
  - Ensure all tests pass, ask the user if questions arise.

- [x] 7. Refactor StoreLocator Example - GeoHash Table
  - [x] 7.1 Update StoreGeoHash entity to use proper attributes
    - Ensure `[GenerateEntityProperty(Name = "Stores")]` is present
    - Ensure `[Scannable]` attribute is present
    - Ensure geospatial attributes are correctly configured
    - Ensure class is declared as `partial`
    - _Requirements: 1.4, 6.1_
  - [x] 7.2 Refactor StoreGeoHashTable to minimal partial class
    - Remove manually defined `Scan<TEntity>()` method
    - Remove manual `AddStoreAsync` method - use generated `PutAsync`
    - Remove manual `FindStoresNearbyAsync` method - use generated spatial query extensions
    - Remove manual `GetAllStoresAsync` and `DeleteAllStoresAsync` methods
    - Keep only constructor, table name constant, and geospatial options
    - _Requirements: 1.4, 2.1, 2.2, 6.3_

- [x] 8. Refactor StoreLocator Example - S2 Table
  - [x] 8.1 Update StoreS2 entity to use proper attributes
    - Ensure `[GenerateEntityProperty(Name = "Stores")]` is present
    - Ensure `[Scannable]` attribute is present
    - Ensure S2 geospatial attributes are correctly configured
    - Ensure class is declared as `partial`
    - _Requirements: 1.4, 6.1_
  - [x] 8.2 Refactor StoreS2Table to minimal partial class
    - Remove manually defined `Scan<TEntity>()` method
    - Remove manual repository methods
    - Keep only constructor, table name constant, and geospatial options
    - _Requirements: 1.4, 2.1, 2.2, 6.3_

- [x] 9. Refactor StoreLocator Example - H3 Table
  - [x] 9.1 Update StoreH3 entity to use proper attributes
    - Ensure `[GenerateEntityProperty(Name = "Stores")]` is present
    - Ensure `[Scannable]` attribute is present
    - Ensure H3 geospatial attributes are correctly configured
    - Ensure class is declared as `partial`
    - _Requirements: 1.4, 6.1_
  - [x] 9.2 Refactor StoreH3Table to minimal partial class
    - Remove manually defined `Scan<TEntity>()` method
    - Remove manual repository methods
    - Keep only constructor, table name constant, and geospatial options
    - _Requirements: 1.4, 2.1, 2.2, 6.3_

- [x] 10. Update StoreLocator Program.cs to use generated methods
  - Replace manual store creation with `table.Stores.PutAsync(store)`
  - Replace manual spatial queries with generated spatial query extensions
  - Use lambda expressions for queries where applicable
  - _Requirements: 3.1, 3.3, 4.1, 6.2_

- [x] 11. Final Checkpoint - Verify all examples compile and run
  - Ensure all tests pass, ask the user if questions arise.
